{% extends 'emails/email_base.html' %}

{% block title %}æ–°ä¹¦æ¨è - {{ books|length }} æœ¬ç²¾é€‰å›¾ä¹¦{% endblock %}

{% block header_title %}ğŸ“– æ–°ä¹¦æ¨è{% endblock %}

{% block subtitle %}æ ¹æ®æ‚¨çš„é˜…è¯»åå¥½ä¸ºæ‚¨æ¨è{% endblock %}

{% block content %}
    <div class="success-box" style="background-color: #e8f4f8; border-left-color: #17a2b8;">
        <strong>ğŸ“š æœ€æ–°ä¸Šæ¶å›¾ä¹¦æ¨è</strong><br>
        <span style="font-size: 14px; margin-top: 5px; display: block;">
            åŸºäºæ‚¨çš„å€Ÿé˜…å†å²å’Œåå¥½ï¼Œæˆ‘ä»¬ä¸ºæ‚¨ç²¾é€‰äº†ä»¥ä¸‹æ–°ä¹¦
        </span>
    </div>

    <p>å°Šæ•¬çš„ {{ user.username }}ï¼š</p>

    <p>å›¾ä¹¦é¦†æœ€è¿‘ä¸Šæ¶äº†ä¸€æ‰¹ä¼˜è´¨æ–°ä¹¦ï¼Œç›¸ä¿¡å…¶ä¸­æœ‰æ‚¨ä¼šæ„Ÿå…´è¶£çš„å†…å®¹ï¼š</p>

    {% for book in books %}
    <div class="info-card" style="margin-bottom: 20px; border-left-color: #17a2b8; background-color: #f8f9fa;">
        <div class="book-title" style="color: #17a2b8;">
            ğŸ“– {{ book.title }}
            {% if book.is_bestseller %}
                <span style="background: #dc3545; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 10px;">ç•…é”€ä¹¦</span>
            {% endif %}
            {% if book.is_new %}
                <span style="background: #28a745; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 5px;">æ–°ä¹¦ä¸Šæ¶</span>
            {% endif %}
        </div>

        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 200px;">
                <div class="info-item">
                    <span class="info-label">ä½œè€…ï¼š</span>
                    <span class="info-value">{{ book.author }}</span>
                </div>

                {% if book.publisher %}
                <div class="info-item">
                    <span class="info-label">å‡ºç‰ˆç¤¾ï¼š</span>
                    <span class="info-value">{{ book.publisher }}</span>
                </div>
                {% endif %}

                {% if book.category %}
                <div class="info-item">
                    <span class="info-label">åˆ†ç±»ï¼š</span>
                    <span class="info-value">{{ book.category.name }}</span>
                </div>
                {% endif %}

                <div class="info-item">
                    <span class="info-label">çŠ¶æ€ï¼š</span>
                    <span class="info-value" style="color: {{ book.available_copies > 0 ? '#28a745' : '#dc3545' }};">
                        {{ book.available_copies > 0 ? 'å¯å€Ÿé˜…' : 'å·²å€Ÿå®Œ' }}
                    </span>
                </div>
            </div>

            {% if book.description %}
            <div style="flex: 2; min-width: 300px;">
                <p style="color: #6c757d; line-height: 1.5; font-size: 14px;">
                    {{ book.description|truncatechars:120 }}
                </p>
            </div>
            {% endif %}
        </div>

        {% if book.available_copies > 0 %}
        <p style="margin-top: 15px; text-align: right;">
            <a href="#" class="action-button" style="font-size: 14px; padding: 8px 20px;">
                ç«‹å³å€Ÿé˜…
            </a>
        </p>
        {% endif %}
    </div>
    {% endfor %}

    <div class="warning-box" style="background-color: #fff3cd; border-left-color: #ffc107;">
        <strong>ğŸ’¡ å€Ÿé˜…æç¤ºï¼š</strong><br>
        â€¢ æ–°ä¹¦é€šå¸¸å€Ÿé˜…éœ€æ±‚è¾ƒå¤§ï¼Œå»ºè®®å°½å¿«é¢„çº¦<br>
        â€¢ å¯è®¾ç½®åˆ°ä¹¦æé†’ï¼Œå›¾ä¹¦å½’è¿˜åç¬¬ä¸€æ—¶é—´é€šçŸ¥æ‚¨<br>
        â€¢ å…³æ³¨æˆ‘ä»¬çš„å®šæœŸæ¨èï¼Œè·å–æ›´å¤šä¼˜è´¨å›¾ä¹¦ä¿¡æ¯
    </div>

    <p style="text-align: center; margin: 30px 0;">
        <a href="#" class="action-button" style="background: linear-gradient(135deg, #17a2b8 0%, #6c757d 100%);">
            æµè§ˆæ›´å¤šæ–°ä¹¦
        </a>
    </p>

    <p>ç¥æ‚¨é˜…è¯»æ„‰å¿«ï¼Œå‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼</p>
{% endblock %}